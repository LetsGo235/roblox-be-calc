<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roblox Creator Break-even Calculator (MVP)</title>
  <style>
    :root{
      --bg:#0f1221;
      --card:#1a1f36;
      --muted:#8892b0;
      --text:#e6e9f4;
      --accent:#7c5cff;
      --good:#22c55e;
      --bad:#ef4444;
      --yellow:#f59e0b;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 20% -10%, #192041 0%, #0f1221 40%, #0b0f1e 100%);
      color:var(--text);
      line-height:1.45;
    }
    header{
      padding:32px 20px 10px;
      text-align:center;
    }
    h1{margin:.2rem 0;font-size:1.6rem}
    .sub{color:var(--muted);font-size:.95rem}
    .wrap{
      max-width:1100px;margin:0 auto;padding:10px 16px 40px;display:grid;gap:16px;
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width:980px){ .wrap{grid-template-columns:1fr} }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.015));
      border:1px solid rgba(255,255,255,.08);
      box-shadow:var(--shadow);border-radius:var(--radius);padding:16px;
    }
    .card h2{font-size:1.1rem;margin:.2rem 0 .6rem;color:#f3f4ff}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    label{font-size:.85rem;color:var(--muted);display:block;margin-bottom:6px}
    input, select{
      width:100%;padding:10px 12px;background:#0f1328;border:1px solid rgba(255,255,255,.12);
      color:var(--text);border-radius:12px;outline:none;
    }
    input:focus, select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(124,92,255,.25)}
    .muted{color:var(--muted);font-size:.85rem}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 10px;background:#0c1026;border:1px solid rgba(255,255,255,.12);
      border-radius:999px;font-size:.8rem;color:#d8dbef
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
      background:#141a31;color:#e8eaff;cursor:pointer;text-decoration:none;
    }
    .btn:hover{border-color:var(--accent)}
    .btn.primary{background: linear-gradient(180deg, #7c5cff, #6a4df2); border-color:transparent}
    .btn.good{background: linear-gradient(180deg, #22c55e, #18a94d); border-color:transparent}
    .btn-row{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .kv{
      display:flex;align-items:baseline;justify-content:space-between;
      padding:8px 10px;background:#101631;border:1px solid rgba(255,255,255,.08);
      border-radius:12px
    }
    .kv .k{color:var(--muted);font-size:.85rem}
    .kv .v{font-variant-numeric:tabular-nums}
    .highlight{border-color:rgba(124,92,255,.5);background:linear-gradient(180deg, rgba(124,92,255,.12), rgba(18,25,60,.5))}
    .good{color:var(--good)} .bad{color:var(--bad)} .yellow{color:var(--yellow)}
    details{
      background:#0d132d;border:1px solid rgba(255,255,255,.1);
      padding:10px;border-radius:12px
    }
    details summary{cursor:pointer;color:#cbd1ff;margin-bottom:8px}
    footer{max-width:1100px;margin:20px auto;padding:0 16px;color:var(--muted);font-size:.8rem}
    .tiny{font-size:.78rem;color:#9aa3c7}
    .notice{margin-top:10px}
    .divider{height:1px;background:rgba(255,255,255,.1);margin:10px 0}
    .sens{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .sens .cell{
      padding:8px;background:#0f142e;border:1px solid rgba(255,255,255,.08);border-radius:10px;
      text-align:center;font-variant-numeric:tabular-nums
    }
    .tag{display:inline-block;padding:4px 8px;border:1px dashed rgba(255,255,255,.2);border-radius:999px;font-size:.75rem;color:#cbd1ff}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
  </style>
</head>
<body>
  <header>
    <div class="pill">
      <span>ðŸŽ® Roblox Creator Ops â€¢ MVP</span>
      <span class="tag">Break-even & Payout Calculator</span>
    </div>
    <h1>Price smarter. Stop guessing.</h1>
    <p class="sub">Paste your assumptions â†’ get net Robux, DevEx $, and break-even in seconds. Share a screenshot, tweak, repeat.</p>
  </header>

  <div class="wrap">
    <section class="card" id="inputsCard">
      <h2>Inputs</h2>
      <div class="row">
        <div>
          <label for="productType">Product type</label>
          <select id="productType">
            <option value="gamepass" selected>Game Pass / Dev Product</option>
            <option value="ugc">UGC Item</option>
          </select>
        </div>
        <div>
          <label for="price">Price (Robux)</label>
          <input id="price" type="number" inputmode="numeric" value="100" min="0" step="1"/>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="traffic">Traffic (unique players / impressions)</label>
          <input id="traffic" type="number" inputmode="numeric" value="50000" min="0" step="1"/>
        </div>
        <div>
          <label for="conversion">Conversion rate (%)</label>
          <input id="conversion" type="number" inputmode="decimal" value="2.0" min="0" step="0.01"/>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="adSpend">Ad spend (Robux)</label>
          <input id="adSpend" type="number" inputmode="numeric" value="10000" min="0" step="1"/>
        </div>
        <div>
          <label for="devexRate">DevEx ($ per Robux)</label>
          <input id="devexRate" type="number" inputmode="decimal" value="0.0035" min="0" step="0.0001"/>
        </div>
      </div>

      <details>
        <summary>Advanced (fees & cuts)</summary>
        <div class="row-3">
          <div>
            <label for="platformCut">Platform cut (%)</label>
            <input id="platformCut" type="number" inputmode="decimal" value="30" min="0" max="100" step="0.1"/>
          </div>
          <div>
            <label for="affiliateCut">Affiliate cut (%)</label>
            <input id="affiliateCut" type="number" inputmode="decimal" value="0" min="0" max="100" step="0.1"/>
          </div>
          <div>
            <label for="otherCut">Other/promo cut (%)</label>
            <input id="otherCut" type="number" inputmode="decimal" value="0" min="0" max="100" step="0.1"/>
          </div>
        </div>
        <p class="tiny">Defaults are placeholders. Adjust to match your specific setup or marketplace rules.</p>
      </details>

      <div class="btn-row">
        <button class="btn primary" id="calcBtn">Calculate</button>
        <button class="btn" id="resetBtn">Reset</button>
        <span class="muted">Tip: tweak price & conversion, then recalc.</span>
      </div>
      <div class="divider"></div>
      <div class="btn-row">
        <button class="btn" id="copyLinkBtn">Copy link with settings</button>
        <button class="btn" id="saveLocalBtn">Save settings locally</button>
        <button class="btn" id="loadLocalBtn">Load saved</button>
      </div>
    </section>

    <section class="card" id="resultsCard">
      <h2>Results</h2>
      <div id="shareTarget">
        <div class="grid">
          <div class="kv"><span class="k">Purchases (calc)</span><strong class="v" id="purchases">â€”</strong></div>
          <div class="kv"><span class="k">Gross Robux</span><strong class="v" id="grossRobux">â€”</strong></div>
          <div class="kv"><span class="k">Fees total</span><strong class="v" id="feesRobux">â€”</strong></div>
          <div class="kv"><span class="k">Net Robux after fees</span><strong class="v" id="netAfterFees">â€”</strong></div>
          <div class="kv"><span class="k">Net after ad spend</span><strong class="v" id="netAfterAds">â€”</strong></div>
          <div class="kv"><span class="k">DevEx estimate (USD)</span><strong class="v" id="devexUSD">â€”</strong></div>
        </div>

        <div class="divider"></div>

        <div class="grid">
          <div class="kv highlight">
            <span class="k">Net per sale (Robux)</span>
            <strong class="v" id="netPerSale">â€”</strong>
          </div>
          <div class="kv highlight">
            <span class="k">Break-even sales</span>
            <strong class="v" id="beSales">â€”</strong>
          </div>
          <div class="kv">
            <span class="k">Break-even conversion</span>
            <strong class="v" id="beConv">â€”</strong>
          </div>
          <div class="kv">
            <span class="k">Profit / (Loss) after ads</span>
            <strong class="v" id="profitLabel">â€”</strong>
          </div>
        </div>

        <div class="notice tiny">
          <span>Estimates only. Actual payouts/fees can change. Use this to compare scenarios, not as financial advice.</span>
        </div>
      </div>

      <div class="divider"></div>

      <h2>Quick sensitivity (conversion)</h2>
      <div class="sens" id="sensGrid">
        <!-- Filled by JS -->
      </div>

      <div class="btn-row">
        <button class="btn" id="exportPngBtn">Export PNG</button>
        <button class="btn good" id="exampleBtn">Load example</button>
      </div>
    </section>
  </div>

  <footer>
    <p class="tiny">Made for fast pricing sanity checks. Built as a single static pageâ€”host anywhere. Â© You.</p>
  </footer>

  <!-- html2canvas for shareable image -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" integrity="sha256-+QnC0zNpmE8TS4z8L/8wC+gfy1EACk8G9gEGSghYjv4=" crossorigin="anonymous"></script>
  <script>
    const $ = (id) => document.getElementById(id);
    const fields = [
      "productType","price","traffic","conversion","adSpend","devexRate","platformCut","affiliateCut","otherCut"
    ];

    // Load from URL params if present
    function loadFromURL(){
      const p = new URLSearchParams(location.search);
      let changed = false;
      fields.forEach(f=>{
        if(p.has(f)){ $(f).value = p.get(f); changed = true; }
      });
      if(changed) calculate();
    }

    // Save settings to localStorage
    function saveLocal(){
      const obj = {};
      fields.forEach(f=> obj[f] = $(f).value);
      localStorage.setItem("rblxCalc", JSON.stringify(obj));
      alert("Saved locally.");
    }
    function loadLocal(){
      const raw = localStorage.getItem("rblxCalc");
      if(!raw){ alert("No saved settings."); return; }
      const obj = JSON.parse(raw);
      fields.forEach(f=>{ if(obj[f] != null) { $(f).value = obj[f]; } });
      calculate();
    }

    // Copy shareable link with current settings
    async function copyLink(){
      const p = new URLSearchParams();
      fields.forEach(f=> p.set(f, $(f).value));
      const url = location.origin + location.pathname + "?" + p.toString();
      try{
        await navigator.clipboard.writeText(url);
        alert("Link copied to clipboard!");
      }catch(e){
        prompt("Copy this link:", url);
      }
    }

    function fmt(n, decimals=0){
      if(!isFinite(n)) return "â€”";
      return Number(n).toLocaleString(undefined, {maximumFractionDigits:decimals, minimumFractionDigits:decimals});
    }
    function pct(n, decimals=2){
      if(!isFinite(n)) return "â€”";
      return n.toLocaleString(undefined, {maximumFractionDigits:decimals, minimumFractionDigits:decimals}) + "%";
    }

    function calculate(){
      // read inputs
      const price = Math.max(0, Number($("price").value || 0));
      const traffic = Math.max(0, Number($("traffic").value || 0));
      const convPct = Math.max(0, Number($("conversion").value || 0));
      const adSpend = Math.max(0, Number($("adSpend").value || 0));
      const devexRate = Math.max(0, Number($("devexRate").value || 0));
      const platformCut = Math.min(100, Math.max(0, Number($("platformCut").value || 0)));
      const affiliateCut = Math.min(100, Math.max(0, Number($("affiliateCut").value || 0)));
      const otherCut = Math.min(100, Math.max(0, Number($("otherCut").value || 0)));

      // core calcs
      const purchases = Math.round(traffic * (convPct / 100));
      const gross = purchases * price;

      const totalCutPct = (platformCut + affiliateCut + otherCut) / 100;
      const feeRobux = gross * totalCutPct;
      const netAfterFees = gross - feeRobux;
      const netPerSale = price * (1 - totalCutPct);

      const netAfterAds = netAfterFees - adSpend;
      const devex = netAfterAds * devexRate;

      // break-even sales = adSpend / net per sale (if netPerSale > 0)
      const beSales = netPerSale > 0 ? Math.ceil(adSpend / netPerSale) : Infinity;
      const beConv = traffic > 0 && isFinite(beSales) ? (beSales / traffic) * 100 : Infinity;
      const profitLossLabel = netAfterAds >= 0 ? "+"+fmt(netAfterAds) + " R$" : "âˆ’" + fmt(Math.abs(netAfterAds)) + " R$";

      // fill outputs
      $("purchases").textContent = fmt(purchases);
      $("grossRobux").textContent = fmt(gross);
      $("feesRobux").textContent = fmt(feeRobux);
      $("netAfterFees").textContent = fmt(netAfterFees);
      $("netAfterAds").textContent = fmt(netAfterAds);
      $("devexUSD").textContent = "$" + fmt(devex, 2);
      $("netPerSale").textContent = fmt(netPerSale, 2) + " R$";
      $("beSales").textContent = isFinite(beSales) ? fmt(beSales) : "â€”";
      $("beConv").textContent = isFinite(beConv) ? pct(beConv, 2) : "â€”";
      $("profitLabel").innerHTML = netAfterAds >= 0
          ? `<span class="good">Profit ${profitLossLabel}</span>`
          : `<span class="bad">Loss ${profitLossLabel}</span>`;

      // sensitivity: conversion -50%, base, +50%
      const variants = [
        Math.max(0, convPct * 0.5),
        convPct,
        convPct * 1.5
      ];
      const grid = $("sensGrid");
      grid.innerHTML = "";
      variants.forEach(v=>{
        const pchs = Math.round(traffic * (v/100));
        const gr = pchs * price;
        const fee = gr * totalCutPct;
        const netF = gr - fee;
        const naa = netF - adSpend;
        const dev = naa * devexRate;
        const el = document.createElement("div");
        el.className = "cell";
        el.innerHTML = `<div class="muted">Conv ${pct(v,2)}</div>
                        <div class="mono">${fmt(naa)} R$</div>
                        <div class="tiny">DevEx ${dev >= 0 ? "" : "âˆ’"}$${fmt(Math.abs(dev),2)}</div>`;
        grid.appendChild(el);
      });
    }

    async function exportPNG(){
      const target = $("shareTarget");
      const btns = document.querySelectorAll("button"); // hide buttons from capture flashes
      btns.forEach(b=> b.disabled = true);
      try{
        const canvas = await html2canvas(target, {backgroundColor: null, scale: 2});
        const data = canvas.toDataURL("image/png");
        const a = document.createElement("a");
        a.href = data;
        a.download = "roblox-break-even.png";
        a.click();
      }finally{
        btns.forEach(b=> b.disabled = false);
      }
    }

    function resetForm(){
      $("productType").value = "gamepass";
      $("price").value = 100;
      $("traffic").value = 50000;
      $("conversion").value = 2.0;
      $("adSpend").value = 10000;
      $("devexRate").value = 0.0035;
      $("platformCut").value = 30;
      $("affiliateCut").value = 0;
      $("otherCut").value = 0;
      calculate();
    }

    function loadExample(){
      $("productType").value = "gamepass";
      $("price").value = 100;
      $("traffic").value = 50000;
      $("conversion").value = 2.0;
      $("adSpend").value = 10000;
      $("devexRate").value = 0.0035;
      $("platformCut").value = 30;
      $("affiliateCut").value = 0;
      $("otherCut").value = 0;
      calculate();
    }

    // listeners
    $("calcBtn").addEventListener("click", calculate);
    $("resetBtn").addEventListener("click", resetForm);
    $("exportPngBtn").addEventListener("click", exportPNG);
    $("copyLinkBtn").addEventListener("click", copyLink);
    $("saveLocalBtn").addEventListener("click", saveLocal);
    $("loadLocalBtn").addEventListener("click", loadLocal);
    $("exampleBtn").addEventListener("click", loadExample);

    // default behavior
    loadFromURL();
    calculate();
  </script>
</body>
</html>
